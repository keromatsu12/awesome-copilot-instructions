---
name: Backend Integration
description: バックエンドサービスやAPIとの統合に関するベストプラクティス。データフェッチ、エラーハンドリング、非同期処理の管理、型安全な通信について解説します。
---

## Directory Structure

```
github/skills/backend-integration/
├── assets/       # 画像や図などのリソース
├── examples/     # 実装例やサンプルコード
├── references/   # 参考文献やリンク
├── scripts/      # 関連するスクリプト
├── templates/    # テンプレートファイル
└── SKILL.md      # このファイル
```

## When to Use

*   外部APIからデータを取得・表示する際
*   ユーザー入力をバックエンドに送信（POST/PUT）する際
*   認証（ログイン・ログアウト）や認可処理を実装する際
*   APIエラーやネットワーク障害のハンドリングを行う際

## Quick Start

1.  **APIクライアントの定義**: ベースURLや共通ヘッダーを設定したAPIクライアントを作成します。
2.  **型定義**: APIのリクエストとレスポンスに対応するTypeScriptの型定義（DTO）を作成します。
3.  **フックの実装**: データ取得や更新を行うカスタムフック（TanStack Queryなどを使用）を実装します。
4.  **UIへの統合**: コンポーネントからフックを呼び出し、ローディング中、エラー時、成功時のUIを制御します。

## Guidelines

### 1. APIロジックの分離

UIコンポーネント内に直接 `fetch` や `axios` の呼び出しを書かないようにします。API通信のロジックは専用のレイヤー（RepositoryやService）に切り出し、再利用性とテスト容易性を高めます。

```typescript
// Bad: コンポーネント内での直接呼び出し
useEffect(() => {
  fetch('/api/users').then(...);
}, []);

// Good: 専用の関数やフックを使用
const { data, isLoading } = useUsers();
```

### 2. 型安全性 (Type Safety)

バックエンドとの通信においては、必ず型定義を行います。可能であれば、OpenAPI (Swagger) などのスキーマから型を自動生成することを推奨します。`any` 型の使用は避け、レスポンスデータの整合性を保証します。

### 3. エラーハンドリング

API呼び出し時のエラーは適切に捕捉し、ユーザーにフィードバックします。
*   **ネットワークエラー**: リトライ処理やオフライン表示を検討します。
*   **HTTPステータスエラー**: 401（未認証）、403（権限なし）、404（見つからない）、500（サーバーエラー）など、ステータスコードに応じた処理を実装します。
*   **バリデーションエラー**: サーバー側から返されたバリデーションメッセージをフォームに表示します。

### 4. 状態管理ライブラリの活用

データ取得には、キャッシュ管理、重複排除、リトライ機能などを提供するライブラリ（TanStack Query / React Query, SWRなど）の利用を強く推奨します。これにより、複雑な非同期状態管理を簡略化できます。

## Templates

*   `templates/`: APIクライアントやカスタムフックのテンプレートが含まれます。
